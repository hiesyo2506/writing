# Amazon Web Service 勉強会

# 概要

## Amazon Web Service って？ ##

Amazon Web Service (以下 AWS) とは、Amazon がウェブサービスという形で提供するクラウドコンピューティングサービスです。2006 年にサービス提供を開始してから現在に至るまで、様々なコンポーネント・サービスが追加され、現在 (2013/03/11 時点) は 34 個のコンポーネント・サービスが提供されています。また、今もなお日々進化しています。

## リージョン、AZ ##

AWS の重要な概念として、リージョンと Available Zone (AZ) があります。AZ とは、要は現実世界に存在する AWS のデータセンターのことで、リージョンとはそれが存在する地域のことです。現時点 (2013/03/11 時点) で世界9ヶ所のリージョンがあります。1つのリージョン内にはデータセンターが複数拠点存在します。
AZ はお互いに地理的、電源的、ネットワーク的に分離されています。複数の AZ に分散してコンポーネントを配置することで、災害が発生してもサービスを停止させることなく運用し続けることができます。AZ 間は専用回線でつながれているので、データの転送も高速です。
リージョンが異なればさらに自然災害などによるサービス停止のりすくを下げることができます。ただしリージョン間のデータ転送はインターネットを経由しますので、AZ 間に比べれば遅くなります。

## 課金方式 ##

AWS は基本的に有料のサービスです。AWS は徹底した従量制の課金体系をとっています。使いたい量、使いたい性能、使いたいサービスを指定してインフラを借りることができ、それを使った分だけ料金が発生します。
この料金体系により、1時間単位で仮想サーバを確保したり、任意の時間帯だけマシンスペックの高い仮想マシンを借りたりといった運用が可能となっています。

## 利点と欠点 ##

AWS を導入することにより、様々なメリットを得ることができます。同時に、いくつかのデメリットも生じます。以下にメリットとデメリットをそれぞれ列挙しました。

### メリット ###

http://gihyo.jp/admin/serial/01/cosmi/0001?page=2

1. 初期コストを低く抑えることができる

AWS を利用すれば、とりあえず低いスペックのマシンでサービスを開始し、その後の負荷に応じてマシンスペックを上げたりサーバを増やしたりといったことが手軽にできます。

2. 高スペックの環境を時間単位で利用できる
3. サービスの成長にあわせて、極めてカンタンにスケールアウトできる
4. 豊富なサービス内容
5. ハードウェアの物理障害をケアする必要がない

### デメリット ###

1. AWS がサービスダウンした際に、自社で解決できない
2. 事前にコストが決まらない
3. 会員情報などを AWS に預けるリスク
4. 1つ1つのインスタンスが弱い
5. グローバルIPアドレスの使い回し

## 導入事例 ##

AWS は様々な企業、機関で採用されています。AWS を直接利用したことはなくても、AWS 上に展開されたサービスを利用したことはあるのではないでしょうか。

http://aws.amazon.com/jp/solutions/case-studies-jp/

* 株式会社東京証券取引所

東京証券取引所では、運用機能やサービス監視機能を実施するためのパッケージの検証環境としてAmazon EC2とAmazon VPCを利用し、サーバー購入と5年間の保守費用も加味した場合に100万円以上になる費用を、最終検証も踏まえ数万円に抑えることができました。

* 九州大学

九州大学は「クラウド型教育要計算機システム」のハイブリッド型クラウド環境の構築にAmazon EC2、S3,VPCを採用。大幅なコスト削減に加え、学府内のIPアドレス体系を利用でき、学府内に設定されているサーバ等との連携を容易に実現しています。

* クックパッド株式会社

クックパッド株式会社は、平常時とピーク時とのトラフィックの差、素早いサービスのリリースに対してインフラ調達を行うため、AWSを採用。Amazon VPC環境でAmazon EC2、S3を中心に活用することにより、柔軟で堅牢なシステムセキュリティを実現しています 。

* トーカ堂テレビショッピング

トーカ堂 テレビショッピングは、Amazon EC2をオンラインショップ運営に活用することで、アクセス集中にも耐えられるインフラ環境を実現すると共に大幅なコスト削減を実現できました。

* 株式会社マピオン

マピオンが提供する「ケータイ国盗り合戦」は、急激なアクセスの変化に対応し、安定したサービス提供を続けるためにAWSのフレキシブルなリソースで運用されています。

# コンポーネントの紹介 #

ここでは、AWS で提供されているコンポーネントを紹介します。すべてのコンポーネントを紹介することは紙面と時間の都合上できないので、いくつかの主要なコンポーネントに絞って紹介したいと思います。

## EC2 ##

最初に紹介するのは Amazon Elastic Compute Cloud (EC2) です。AWS の中でももっともポピュラーで、かつ汎用的なコンポーネントでしょう。
このコンポーネントは、要は仮想マシンです。好きな OS をインストールし、その上で任意のサービスを展開することができます。アプリケーションサーバとしての利用が一般的で、LAMP 構成 (死語?) でサービスを展開したり、DB 専用のマシンにしたり、はたまた何かの計算専用に利用したりと、用途は様々です。

### EC2 の魅力 ###

EC2 の魅力は、なんと言ってもその柔軟性です。サーバを増やしたり減らしたり、サーバのスペックを上げたり下げたり、ちょっとした手続きを踏むだけでカンタンに調整することができます。
また、Amazon マシンイメージ (AMI) という仕組みにより、複製を作ることも容易です。この AMI を利用することで、非常に柔軟なクラウドらしいサーバ運用が可能です。詳しくは後述します。

### EC2 の基本 ###

## EBS ##

EC2 で注意すべき点は、データの永続化ができないという点です。AMI に含まれていないデータは、インスタンスの停止時に全て失われてしまいます。
EC2 で提供されている Elastic Block Storage (EBS) は、EC2 インスタンスからマウント可能な永続可能なストレージです。EC2 上で永続したいデータがある場合には EC2 とは別途 EBS ボリュームを確保する必要があります。
EC2 にマウントされた EBS ボリュームは、OS からはローカルなデバイスとして認識されます。

### スナップショット ###

EBS にはそのスナップショットを保存する機能があります。スナップショットは後述するストレージサービス Amazon Simple Storage Service (S3) 上に保存されます。また、スナップショットは差分で保存されるので、容量も抑えられるようになっています。

## S3 ##

Amazon Simple Storage Service

## RDS ##

Amazon Relational Database Service

## SQS, SNS ##

Simple Queue Service, Simple Notification Service

## AMT ###

Amazon Mechanical Turk

## その他のコンポーネント ##

# ケーススタディ #
